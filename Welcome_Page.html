<h2 id="welcomeText">Loading...</h2>
<button onclick="logout()">Logout</button>

<script>
(async () => {
  const token = localStorage.getItem("token");
  if (!token) {
    alert("You must login first!");
    window.location.href = "InstitutionLogin.html";
    return;
  }

  const res = await fetch("http://127.0.0.1:5000/profile", {
    headers: { "x-access-token": token }
  });

  const data = await res.json();
  if (!res.ok) {
    alert(data.message);
    window.location.href = "InstitutionLogin.html";
  } else {
    document.getElementById("welcomeText").innerText = data.message;
  }
})();

function logout() {
  localStorage.removeItem("token");
  window.location.href = "InstitutionLogin.html";
}
</script>
